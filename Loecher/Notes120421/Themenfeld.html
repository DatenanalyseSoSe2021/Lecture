<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Yilun" />


<title>Themenfeld</title>

<script src="Themenfeld_files/header-attrs-2.7/header-attrs.js"></script>
<script src="Themenfeld_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="Themenfeld_files/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="Themenfeld_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="Themenfeld_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="Themenfeld_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="Themenfeld_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="Themenfeld_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="Themenfeld_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="Themenfeld_files/navigation-1.1/tabsets.js"></script>
<link href="Themenfeld_files/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="Themenfeld_files/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-sm-12 col-md-4 col-lg-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-sm-12 col-md-8 col-lg-9">




<div id="header">



<h1 class="title toc-ignore">Themenfeld</h1>
<h4 class="author">Yilun</h4>
<h4 class="date">4/12/2021</h4>

</div>


<div id="new-york-city-flights-in-2013" class="section level1">
<h1>New York City Flights in 2013</h1>
<p>Als Beispiel wird die library <code>nycflights13</code> verwendet</p>
<div id="query-questions" class="section level2">
<h2>Query questions</h2>
<div id="was-ist-die-differenz-zwischen-dep_time-und-sched_dep_time-in-zeile-20" class="section level3">
<h3>Was ist die Differenz zwischen dep_time und sched_dep_time in Zeile 20 ?</h3>
<pre class="r"><code>flights[20,&quot;dep_delay&quot;]</code></pre>
<pre><code>## [1] 1</code></pre>
</div>
<div id="wie-oft-sind-flüge-zu-spät-abgehoben" class="section level3">
<h3>Wie oft sind Flüge zu spät abgehoben?</h3>
<pre class="r"><code>#Vectorized Operations
#Just for fun: Depdelay = flights[,&quot;dep_time&quot;]-flights[,&quot;sched_dep_time&quot;]
delayedFlights = flights[,&quot;dep_delay&quot;] &gt; 0

#Preview of the results
head(flights[,&quot;dep_delay&quot;] &gt; 0)</code></pre>
<pre><code>## [1]  TRUE  TRUE  TRUE FALSE FALSE FALSE</code></pre>
<pre class="r"><code>#Get results
sum(delayedFlights,na.rm = TRUE)</code></pre>
<pre><code>## [1] 128432</code></pre>
<pre class="r"><code>mean(delayedFlights,na.rm = TRUE)</code></pre>
<pre><code>## [1] 0.39094</code></pre>
</div>
<div id="wie-viele-flüge-gibt-es-im-januar" class="section level3">
<h3>Wie viele flüge gibt es im januar?</h3>
<pre class="r"><code>#via Boolean values:
Janflights = flights$month == 1
sum(Janflights)</code></pre>
<pre><code>## [1] 27004</code></pre>
<pre class="r"><code>#via Subsets
JanFlights = subset(flights, month == 1)
length(JanFlights$month)</code></pre>
<pre><code>## [1] 27004</code></pre>
<pre class="r"><code>#via Boolean 
JanFlights = flights[flights$month == 1,]
nrow(JanFlights)</code></pre>
<pre><code>## [1] 27004</code></pre>
<p>Wie viele Flüge gibt es pro Monat?</p>
<pre class="r"><code>table(flights$month)</code></pre>
<pre><code>## 
##     1     2     3     4     5     6     7     8     9    10    11    12 
## 27004 24951 28834 28330 28796 28243 29425 29327 27574 28889 27268 28135</code></pre>
</div>
<div id="wie-viele-flügen-flogen-nach-atl-pro-monat" class="section level3">
<h3>Wie viele Flügen flogen nach ATL pro Monat?</h3>
<pre class="r"><code># get all flights to ATL
ATLFlights= flights[flights$dest ==&quot;ATL&quot;,]
# create Table:
table(ATLFlights$month)</code></pre>
<pre><code>## 
##    1    2    3    4    5    6    7    8    9   10   11   12 
## 1396 1267 1448 1490 1499 1438 1511 1507 1364 1448 1384 1463</code></pre>
<pre class="r"><code># nested solution
table(subset(flights, dest == &quot;ATL&quot;)$month)</code></pre>
<pre><code>## 
##    1    2    3    4    5    6    7    8    9   10   11   12 
## 1396 1267 1448 1490 1499 1438 1511 1507 1364 1448 1384 1463</code></pre>
</div>
<div id="wohin-gibt-es-die-meisten-flüge" class="section level3">
<h3>Wohin gibt es die meisten Flüge?</h3>
<pre class="r"><code>destination = sort(table(flights$dest),decreasing = TRUE)
# Most Flights
destination[1]</code></pre>
<pre><code>##   ORD 
## 17283</code></pre>
</div>
<div id="der-durchschnittliche-wert-für-verspätete-ankuft" class="section level3">
<h3>Der durchschnittliche Wert für verspätete Ankuft</h3>
<pre class="r"><code>LateArrivals =subset(flights, arr_delay &gt; 0) 
mean(LateArrivals$arr_delay, na.rm= TRUE)</code></pre>
<pre><code>## [1] 40.3425</code></pre>
</div>
<div id="verteilung-von-departure-delays-von-allen-aa-flügen" class="section level3">
<h3>Verteilung von Departure delays von allen AA Flügen</h3>
<pre class="r"><code>AAonly = which(flights$carrier == &quot;AA&quot;)
AAdelays = flights[AAonly,&quot;dep_delay&quot;]

hAA=hist(AAdelays)</code></pre>
<p><img src="Themenfeld_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<pre class="r"><code>hAA$counts</code></pre>
<pre><code>##  [1] 21931  7773  1380   562   249   112    37    22     9     3     1     3
## [13]     1     2     1     0     2     2     2     0     0     1</code></pre>
</div>
<div id="die-durchschnittliche-verspätung-der-ankünfte-pro-origin" class="section level3">
<h3>Die durchschnittliche Verspätung der Ankünfte pro origin</h3>
<pre class="r"><code>#Manual steps
LateArrivals =subset(flights, arr_delay &gt; 0) 
(Mean.EWR = mean(subset(LateArrivals,origin == &quot;EWR&quot;)$arr_delay))</code></pre>
<pre><code>## [1] 41.75307</code></pre>
<pre class="r"><code>(Mean.JFK = mean(subset(LateArrivals,origin == &quot;JFK&quot;)$arr_delay))</code></pre>
<pre><code>## [1] 40.00993</code></pre>
<pre class="r"><code>(Mean.LGA = mean(subset(LateArrivals,origin == &quot;LGA&quot;)$arr_delay))</code></pre>
<pre><code>## [1] 38.93306</code></pre>
<p>With aggregate()</p>
<pre class="r"><code>#aggregate
#version1: 
aggregate(arr_delay ~ origin, data = LateArrivals, mean, na.rm = TRUE)</code></pre>
<pre><code>##   origin arr_delay
## 1    EWR  41.75307
## 2    JFK  40.00993
## 3    LGA  38.93306</code></pre>
<pre class="r"><code>#version2
aggregate(LateArrivals$arr_delay,list(LateArrivals$origin),mean)</code></pre>
<pre><code>##   Group.1        x
## 1     EWR 41.75307
## 2     JFK 40.00993
## 3     LGA 38.93306</code></pre>
<p>Pro Origin und pro Monat</p>
<pre class="r"><code>#with multiple  criteria
aggregate(arr_delay ~ origin + month, data = LateArrivals, mean, na.rm = TRUE)</code></pre>
<pre><code>##    origin month arr_delay
## 1     EWR     1  39.64050
## 2     JFK     1  32.62496
## 3     LGA     1  28.57540
## 4     EWR     2  35.34945
## 5     JFK     2  35.49364
## 6     LGA     2  29.24735
## 7     EWR     3  45.66148
## 8     JFK     3  36.78781
## 9     LGA     3  37.78652
## 10    EWR     4  44.73978
## 11    JFK     4  39.77621
## 12    LGA     4  43.06928
## 13    EWR     5  40.84619
## 14    JFK     5  42.62023
## 15    LGA     5  42.53812
## 16    EWR     6  52.32976
## 17    JFK     6  54.13600
## 18    LGA     6  55.05976
## 19    EWR     7  52.56366
## 20    JFK     7  56.29094
## 21    LGA     7  52.61877
## 22    EWR     8  40.15240
## 23    JFK     8  38.85882
## 24    LGA     8  39.53148
## 25    EWR     9  40.08858
## 26    JFK     9  36.01353
## 27    LGA     9  40.32276
## 28    EWR    10  31.51492
## 29    JFK    10  25.98773
## 30    LGA    10  28.73769
## 31    EWR    11  28.22643
## 32    JFK    11  26.86306
## 33    LGA    11  27.28798
## 34    EWR    12  42.26357
## 35    JFK    12  38.25659
## 36    LGA    12  38.04565</code></pre>
<p>With group_by()</p>
<pre class="r"><code>avg_arr_delay = group_by(LateArrivals, origin)
arr_delayorig = summarise(
  avg_arr_delay,
  arr_delayorig = mean(arr_delay, na.rm = TRUE)
  )</code></pre>
</div>
</div>
</div>
<div id="hw-1" class="section level1">
<h1>HW 1</h1>
<div id="compute-the-90-quatile-of-arr_delay" class="section level3">
<h3>Compute the 90% quatile of <code>arr_delay</code></h3>
<pre class="r"><code>quantile(flights$arr_delay, na.rm = TRUE, probs = 0.9)</code></pre>
<pre><code>## 90% 
##  52</code></pre>
</div>
<div id="compute-the-90-quantile-of-arr_delay-grouped-by-origin" class="section level3">
<h3>Compute the 90% quantile of <code>arr_delay</code> grouped by <code>origin</code></h3>
<pre class="r"><code># With Groupby: 

byOrigin = group_by(flights, origin)
summarise(byOrigin, m = quantile(arr_delay,probs = 0.9, na.rm = TRUE))</code></pre>
<pre><code>## # A tibble: 3 x 2
##   origin     m
##   &lt;chr&gt;  &lt;dbl&gt;
## 1 EWR       58
## 2 JFK       50
## 3 LGA       47</code></pre>
<pre class="r"><code># With for Loop:

for (o in unique(flights$origin)) {
  x = subset(flights, origin == o)
  print(quantile(x$arr_delay, p=0.9, na.rm=TRUE))
  
}</code></pre>
<pre><code>## 90% 
##  58 
## 90% 
##  47 
## 90% 
##  50</code></pre>
</div>
<div id="create-a-default-histogram-of-arr_delay-and-extract-the-density-value-for-the-10th-bar." class="section level3">
<h3>Create a (default) histogram of <code>arr_delay</code> and extract the <strong>density</strong> value for the 10th bar.</h3>
<pre class="r"><code>harr_delay = hist(flights$arr_delay)</code></pre>
<p><img src="Themenfeld_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<pre class="r"><code>harr_delay$density[10]</code></pre>
<pre><code>## [1] 9.775589e-06</code></pre>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
